# ====================================
# SERVER CONFIGURATION
# ====================================
server.port=8080

# ====================================
# H2 DATABASE (IN-MEMORY - EASY START)
# ====================================
spring.datasource.url=jdbc:h2:mem:musicdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# H2 CONSOLE (View database in browser)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.trace=false
spring.h2.console.settings.web-allow-others=false

# ====================================
# JPA / HIBERNATE CONFIGURATION
# ====================================
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Initialize database with sample data from data.sql
spring.sql.init.mode=always
spring.sql.init.data-locations=classpath:data.sql
spring.jpa.defer-datasource-initialization=true

# ====================================
# LOGGING (See what's happening)
# ====================================
logging.level.com.music.musicapp=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ====================================
# LOMBOK (Reduces boilerplate code)
# ====================================
lombok.anyConstructor.addConstructorProperties=true

# ====================================
# CORS CONFIGURATION (for frontend access)
# ====================================
# Allow requests from React frontend (we'll build later)
spring.mvc.cors.allowed-origins=http://localhost:3000
spring.mvc.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.mvc.cors.allowed-headers=*
spring.mvc.cors.allow-credentials=true

# ====================================
# JACKSON (JSON) CONFIGURATION
# ====================================
# Pretty print JSON responses for readability
spring.jackson.serialization.indent-output=true
spring.jackson.default-property-inclusion=NON_NULL
spring.jackson.time-zone=UTC
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss

# ====================================
# SPRING MVC CONFIGURATION
# ====================================
# Include error messages in responses
server.error.include-message=always
server.error.include-stacktrace=never
server.error.include-binding-errors=always

# ====================================
# FILE UPLOAD CONFIGURATION (for Day 4)
# ====================================
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# ====================================
# APPLICATION METADATA
# ====================================
spring.application.name=MusicApp
app.version=1.0.0
app.description=Music Streaming Application API

# ====================================
# SECURITY (Basic for now, JWT in Day 6)
# ====================================
# Disable security for now (we'll add it later)
# spring.security.user.name=admin
# spring.security.user.password=admin